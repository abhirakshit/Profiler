define("modules/templateLoader/templateLoader",[],function(){Marionette.TemplateLoader=function(e,t){var n={};return n.templatePath="templates/",n.templateExt=".html",n.templatePrefix="",n.loadModuleTemplates=function(e,t){n.templatePath=e.templatePath,n.templatePrefix=e.prefix;var r=[];for(var i in e.views){var s=e.views[i],o=s.prototype.template;if(!o||typeof o=="function")continue;r.push(s.prototype.template)}var u=n.preloadTemplates(r,e);$.when(u).done(t)},n.preloadTemplates=function(e,r){var i=$.Deferred(),s=[];t.each(e,function(t,r){s[r]=n.preloadTemplate(e[r],n)});var o=s.length;return t.each(s,function(e){$.when(e).done(function(){o--,o==0&&i.resolveWith(r)})}),i},n.preloadTemplate=function(e,t){var r=$.Deferred(),i=this,s,o;if(!e||e.length==0)throw o=new Error("No templateId was specified - please provide a valid template id or filename."),o.name="NoTemplateSpecified",o;var u=e.substr(0,1)==="#",a=u?$(e).html():null;if(!(a&&a.length>0)){var f=e.indexOf("-"),l=u?e.substr(1):f>0?e.substr(f+1):e,c=n.templatePath+l+n.templateExt;return $.get(c,function(i){if(!i||i.length==0)throw s="Could not find template: '"+e+"'",o=new Error(s),o.name="NoTemplateError",o;n.storeTemplate(e,i),r.resolveWith(t)}),r}n.storeTemplate(e,a),r.resolveWith(t)},n.storeTemplate=function(t,n){n=e.TemplateCache.prototype.compileTemplate(n);var r=new e.TemplateCache(t);r.compiledTemplate=n,e.TemplateCache.templateCaches[t]===undefined&&(e.TemplateCache.templateCaches[t]=r)},n}(Marionette,_)}),define("modules/base/setup",[],function(){Application.module("Base",function(e){e.prefix="base",e.templatePath="assets/javascripts/modules/",e.views={},e.template=function(e){return this.prefix+"-"+e},e.models={},e.collections={}})}),define("modules/base/models/base",[],function(){Application.module("Base",function(e,t,n,r,i,s){e.models.Generic=n.Model.extend({initialize:function(e,t){t&&t.urlRoot&&(this.urlRoot=t.urlRoot),e&&e.urlRoot&&(this.urlRoot=e.urlRoot),t&&t.url&&(this.url=t.url),e&&e.url&&(this.url=e.url)}}),e.collections.Generic=n.Collection.extend({model:e.models.Generic,initialize:function(e,t){t&&t.url&&(this.url=t.url),e&&e.url&&(this.url=e.url)}}),e.models.User=n.Model.extend({urlRoot:"/user"})})}),define("modules/base/models/multiSelect",[],function(){Application.module("Base",function(e,t,n,r,i,s){e.collections.MultiSelect=n.Collection.extend({model:e.models.Generic,initialize:function(e,t){t&&t.url&&(this.url=t.url)},parse:function(e){return e}})})}),define("modules/base/views/layouts/layouts",[],function(){Application.module("Base",function(e,t,n,r,i,s){e.views.MainLayout=r.Layout.extend({template:"base/views/layouts/mainLayout",regions:{pageHeaderRegion:"#page-header",navigationTabsRegion:"#nav-tabs",tabContentRegion:"#tab-content"}}),e.views.HeaderLayout=r.Layout.extend({template:"base/views/layouts/headerLayout",regions:{pageHeader:"#page-header",addEnquiryBtn:"#add-enquiry-btn"}})})}),define("modules/base/views/tables/tables",[],function(){Application.module("Base",function(e,t,n,r,i,s){e.views.TableLayout=r.Layout.extend({template:"base/views/tables/tableLayout",regions:{tableHeaderRegion:"#table-header",tableBodyRegion:"#table-body"}});var o="<legend><%=args.header%></legend>";e.views.TableHeader=r.ItemView.extend({template:function(e){var t=e.header;return s.template(o,{header:t},{variable:"args"})}}),e.rowClicked="rowClicked",e.rowClickedEvt="RowView:rowClicked",e.tableViewRowClickedEvt="TableView:RowView:rowClicked"})}),define("modules/base/views/forms/formElems",[],function(){Application.module("Base",function(e,t,n,r,i,s){e.views.AddButton=r.ItemView.extend({template:"base/views/forms/createButton",className:"primaryRightBtn",events:{click:"triggerClick"},triggerClick:function(e){e.preventDefault(),this.trigger("Base.AddButton.Click",this.model)}}),e.views.DropDown=r.ItemView.extend({className:"controls",template:"base/views/forms/dropDown",initialize:function(){this.optionsList=new t.Base.collections.MultiSelect([],{url:this.model.get("url")}),this.optionsList.fetch({async:!1}),this.model.set("optionsList",this.optionsList.models)}})})}),define("modules/base/views/headers/pageHeader",[],function(){Application.module("Base",function(e,t,n,r,i,s){var o='<h1 class="page-title"><%=args.header%></h1>';e.views.PageHeader=r.ItemView.extend({template:function(e){var t=e.header;return s.template(o,{header:t},{variable:"args"})}})})}),define("modules/base/views/navigation/navTabs",[],function(){Application.module("Base",function(e,t,n,r,i,s){e.views.NavTab=r.ItemView.extend({template:"base/views/navigation/navTab",tagName:"li",events:{click:"clicked"},select:function(){this.$el.addClass("active")},unSelect:function(){this.$el.removeClass("active")},clicked:function(e){e.preventDefault(),this.trigger("NavTab:Clicked","Navigate")}}),e.HeaderTabCollection=r.CollectionView.extend({itemView:e.views.NavTab,tagName:"ul",className:"nav nav-tabs",initialize:function(){var e=this;this.on("itemview:NavTab:Clicked",function(t,n){e.trigger("collectionView:itemview:NavTab:Clicked",t.model.get("url"))})},unSelectAll:function(){this.children.each(function(e){e.unSelect()})},selectTabView:function(e){this.unSelectAll();var t=this.children.find(function(t){return t.model.get("url")==e});t.select()}})})}),define("modules/base/views/validation/validationMessages",[],function(){Application.module("Base",function(e,t,n,r,i,s){s.extend(n.Validation.callbacks,{valid:function(e,t,n){var r,i;r=e.$("["+n+"="+t+"]"),i=r.parents(".control-group"),i.removeClass("error");if(r.data("error-style")!=="tooltip")return r.data("error-style")==="inline"?i.find(".help-inline.error-message").remove():i.find(".help-block.error-message").remove();if(r.data("tooltip"))return r.tooltip("hide")},invalid:function(e,t,n,r){var i,s,o,u;return i=e.$("["+r+"="+t+"]"),s=i.parents(".control-group"),s.addClass("error"),i.data("error-style")==="tooltip"?(o=i.data("tooltip-position")||"right",i.tooltip({placement:o,trigger:"manual",title:n}),i.tooltip("show")):i.data("error-style")==="inline"?(s.find(".help-inline").length===0&&s.find(".controls").append('<span class="help-inline error-message"></span>'),u=s.find(".help-inline"),u.text(n)):(s.find(".help-block").length===0&&s.find(".controls").append('<p class="help-block error-message"></p>'),u=s.find(".help-block"),u.text(n))}})})}),define("modules/base/controller",[],function(){Application.module("Base",function(e,t,n,r,i,s){e.STUDENT_ROLE="student",e.COUNSELOR_ROLE="counselor",e.ADMIN_ROLE="admin",e.SUPER_ADMIN_ROLE="superAdmin",e.getLoggedInUser="/user",e.getAllCounselorUrl="/users/counselors",e.getAllScoolsUrl="/schools/all",e.loggedUserId=window.userId.replace(/&quot;/g,""),e.Router=r.AppRouter.extend({appRoutes:{home:"showAppHome"}}),e.Controller=r.Controller.extend({showAppHome:function(){}}),updateLoggedUser=function(){e.loggedUser=new e.models.User({id:e.loggedUserId}),e.loggedUser.fetch({async:!1})},e.isAdmin=function(){var n=e.loggedUser.attributes.roleType;return n==t.Base.ADMIN_ROLE||n==t.Base.SUPER_ADMIN_ROLE?!0:!1},e.isSuperAdmin=function(){var n=e.loggedUser.attributes.roleType;return n==t.Base.SUPER_ADMIN_ROLE?!0:!1},populateCounselorCollection=function(){e.allCounselorCollection=new e.collections.Generic([],{url:e.getAllCounselorUrl}),e.allCounselorCollection.fetch({async:!1})},populateInstitutionCollection=function(){e.allSchoolsCollection=new e.collections.Generic([],{url:e.getAllScoolsUrl}),e.allSchoolsCollection.fetch({async:!1})},e.onTemplatesLoaded=function(){e.show()},setUpXEditableConfig=function(){i.fn.editable.defaults.mode="inline",i.fn.editable.defaults.ajaxOptions={type:"PATCH",dataType:"json"},!e.isAdmin()&&!e.isSuperAdmin()&&(i.fn.editable.defaults.disabled="true")},e.show=function(){console.log("Show Base..."),e.controller=new e.Controller,e.router=new e.Router({controller:e.controller}),updateLoggedUser(),setUpXEditableConfig(),populateInstitutionCollection(),populateCounselorCollection()},e.showSearchHomeEvt="showSearchHome",e.showQueriesHomeEvt="showQueriesHome",e.showProfilesHomeEvt="showProfilesHome",e.showSettingsHomeEvt="showSettingsHome",t.vent.on("all",function(n,r){e.showQueriesHomeEvt==n?(t.Queries.controller.showQueriesHome(),t.Sidebar.activateSidebarTab(t.Sidebar.NavQueriesId)):e.showProfilesHomeEvt==n?(t.Profiles.controller.showProfilesHome(),t.Sidebar.activateSidebarTab(t.Sidebar.NavProfilesId)):e.showSettingsHomeEvt==n?(t.Settings.controller.showSettingsHome(),t.Sidebar.activateSidebarTab(t.Sidebar.NavSettingsId)):e.showSearchHomeEvt==n&&(t.Search.controller.showSearchHome(),t.Sidebar.activateSidebarTab(t.Sidebar.NavSearchId))}),e.getCounselorName=function(t){if(t){var n=s.findWhere(e.allCounselorCollection.toJSON(),{id:t});if(n)return n.fullName}return""},e.dateViewHelper={formatDate:function(e,t){return moment(e).format(t)},getCurrentDate:function(e){return moment().format(e)}},e.addDataTables=function(e){e.$el.find(".dataTable").dataTable({bJQueryUI:!0,sPaginationType:"full_numbers",bInfo:!1})},e.onHoverEditable=function(e){e.$el.find(".editable").hover(function(){i(this).addClass("over")},function(){i(this).removeClass("over")})}})}),define("modules/base/loader",["modules/base/setup","modules/base/models/base","modules/base/models/multiSelect","modules/base/views/layouts/layouts","modules/base/views/tables/tables","modules/base/views/forms/formElems","modules/base/views/headers/pageHeader","modules/base/views/navigation/navTabs","modules/base/views/validation/validationMessages","modules/base/controller"],function(){Application.module("Base",function(e,t,n,r,i,s){e.addInitializer(function(){console.log("Init Base..."),r.TemplateLoader.loadModuleTemplates(e,e.show)})})}),define("modules/header/setup",[],function(){Application.module("Header",function(){this.prefix="header",this.templatePath="assets/javascripts/modules/",this.views={},this.template=function(e){return this.prefix+"-"+e},this.models={},this.collections={}})}),define("modules/header/views/layouts/layout",[],function(){Application.module("Header",function(e,t,n,r,i,s){e.views.Layout=r.Layout.extend({template:"header/views/layouts/layout",className:"navbar-inner",regions:{appLabel:"#app-label",navTabs:"#header-nav-tabs",userDropDown:"#user-dropdown"}})})}),define("modules/header/views/header",[],function(){Application.module("Header",function(e,t,n,r,i,s){var o="<%=args.appLabel%>";e.views.AppLabel=r.ItemView.extend({tagName:"a",className:"brand",id:"appLabel",template:function(e){return s.template(o,{appLabel:e.appLabel},{variable:"args"})},events:{"click #appLabel":"showAppHome"},showAppHome:function(e){e.preventDefault(),console.log("Show App home")}});var u='<a href="<%=args.tabUrl%>"><%=args.tabLabel%></a>';e.views.HeaderTab=r.ItemView.extend({tagName:"li",template:function(e){return s.template(u,{tabLabel:e.tabLabel,tabUrl:e.tabUrl},{variable:"args"})}}),e.collections.HeaderTab=r.CompositeView.extend({tagName:"ul",className:"nav",itemView:e.views.HeaderTab,template:function(e){return s.template("")}});var a='<a href="<%=args.optionUrl%>"><i class="<%=args.iconClass%>"></i>&nbsp<%=args.optionText%></a>';e.views.UserDropDownOption=r.ItemView.extend({tagName:"li",initialize:function(){this.$el.prop("id",this.model.get("optionId"))},template:function(e){return s.template(a,{optionUrl:e.optionUrl,optionText:e.optionText,iconClass:e.iconClass},{variable:"args"})},events:{click:"clicked"},clicked:function(e){e.preventDefault(),this.trigger("dropdown:selected","")}}),e.views.UserDropDownCollection=r.CompositeView.extend({template:"header/views/userBtn",className:"btn-group pull-right",itemView:e.views.UserDropDownOption,itemViewContainer:"#user-actions",serializeData:function(){return this.data=this.model.toJSON(),this.data},initialize:function(){var e=this;this.on("itemview:dropdown:selected",function(t,n){e.trigger("collectionview:itemview:dropdown:selected",t.model)})},onRender:function(){this.$el.find("#logout").before('<li class="divider"></li>')},events:{"click #profile":"showProfile"},showProfile:function(e){e.preventDefault(),console.log("Show profile"),t.vent.trigger(t.Base.showSettingsHomeEvt)}})})}),define("modules/header/controller",[],function(){Application.module("Header",function(e,t,n,r,i,s){var o=t.module("Base"),u="logout";getUserDropDownOptions=function(){return new o.collections.Generic([new o.models.Generic({optionId:"profile",optionUrl:"#user/profile",optionText:"Profile",iconClass:""}),new o.models.Generic({optionId:"logout",optionUrl:u,optionText:"Logout",iconClass:"icon-off"})])},getAdminDropDownOptions=function(){return new o.collections.Generic([new o.models.Generic({optionId:"profile",optionUrl:"#user/profile",optionText:"Profile",iconClass:""}),new o.models.Generic({optionId:"logout",optionUrl:u,optionText:"Logout",iconClass:"icon-off"})])},getHeaderTabCollection=function(){return new o.collections.Generic([new o.models.Generic({tabLabel:"Search",tabUrl:"#search"})])},e.onTemplatesLoaded=function(){this.show()},e.show=function(){console.log("Show Header"),e.layout=new e.views.Layout,t.headerRegion.show(e.layout),e.setupLayout()},e.setupLayout=function(){var t=new e.views.AppLabel({model:new n.Model({appLabel:"Career DB"})});e.layout.appLabel.show(t);var r=new e.views.UserDropDownCollection({collection:e.getDropDownOptions(o.loggedUser),model:o.loggedUser});e.layout.userDropDown.show(r),this.listenTo(r,"collectionview:itemview:dropdown:selected",function(e){console.dir(e),e.attributes.optionUrl==u&&i.ajax({url:u,success:function(){console.log("Logged Out..."),window.location.reload()}})})},e.getDropDownOptions=function(e){return o.isAdmin()?getAdminDropDownOptions():getUserDropDownOptions()}})}),define("modules/header/loader",["modules/header/setup","modules/header/views/layouts/layout","modules/header/views/header","modules/header/controller"],function(){Application.module("Header",function(e,t,n,r,i,s){e.addInitializer(function(){console.log("Init Header..."),r.TemplateLoader.loadModuleTemplates(e,e.show)})})}),define("modules/sidebar/setup",[],function(){Application.module("Sidebar",function(){this.prefix="sidebar",this.templatePath="assets/javascripts/modules/",this.views={},this.template=function(e){return this.prefix+"-"+e},this.models={},this.collections={}})}),define("modules/sidebar/views/sidebarTab",[],function(){Application.module("Sidebar",function(e,t,n,r,i,s){e.views.SideBarTab=r.ItemView.extend({template:"sidebar/views/sidebarTab",tagName:"li",initialize:function(){this.$el.prop("id",this.model.get("id"))},events:{click:"clicked"},select:function(){this.$el.addClass("active")},unSelect:function(){this.$el.removeClass("active")},clicked:function(e){e.preventDefault(),this.trigger("sidebar-navtab:clicked","Show Module")}}),e.views.SidebarOptions=r.CompositeView.extend({template:"sidebar/views/sidebarContainer",itemView:e.views.SideBarTab,itemViewContainer:"#main-nav",initialize:function(){var e=this;this.on("itemview:sidebar-navtab:clicked",function(t,n){e.trigger("collectionview:itemview:sidebar-navtab:clicked",t.model.get("id"))})},unSelectAll:function(){this.children.each(function(e){e.unSelect()})},selectTabView:function(e){this.unSelectAll();var t=this.children.find(function(t){return t.model.get("id")==e});t.select()}})})}),define("modules/sidebar/controller",[],function(){Application.module("Sidebar",function(e,t,n,r,i,s){e.NavSearchId="sidebar-nav-search",e.NavQueriesId="sidebar-nav-queries",e.NavProfilesId="sidebar-nav-profiles",e.NavSettingsId="sidebar-nav-settings",getCounselorSideBarOptionCollection=function(){return new t.Base.collections.Generic([new t.Base.models.Generic({id:e.NavSearchId,name:"Search",icon:"icon-search"}),new t.Base.models.Generic({id:e.NavSettingsId,name:"Settings",icon:"icon-cog"})])},getStudentSideBarOptionCollection=function(){return new t.Base.collections.Generic([new t.Base.models.Generic({id:e.NavSearchId,name:"Search",icon:"icon-search"}),new t.Base.models.Generic({id:e.NavSettingsId,name:"Settings",icon:"icon-cog"})])},e.onTemplatesLoaded=function(){e.show()},e.show=function(){var n;t.Base.loggedUser.attributes.roleType==t.Base.COUNSELOR_ROLE?n=getCounselorSideBarOptionCollection():n=getStudentSideBarOptionCollection(),e.sidebarOptionsView=new this.views.SidebarOptions({collection:n}),this.listenTo(e.sidebarOptionsView,"collectionview:itemview:sidebar-navtab:clicked",function(t){e.NavQueriesId==t?e.showQueriesModule():e.NavProfilesId==t?e.showProfilesModule():e.NavSettingsId==t?e.showSettingsModule():e.NavSearchId==t&&e.showSearchModule()}),t.sidebar.show(e.sidebarOptionsView),e.activateSidebarTab(e.NavSearchId)},e.showQueriesModule=function(){t.vent.trigger(t.Base.showQueriesHomeEvt)},e.showProfilesModule=function(){t.vent.trigger(t.Base.showProfilesHomeEvt)},e.showSettingsModule=function(){t.vent.trigger(t.Base.showSettingsHomeEvt)},e.showSearchModule=function(){t.vent.trigger(t.Base.showSearchHomeEvt)},e.activateSidebarTab=function(t){e.sidebarOptionsView.selectTabView(t)}})}),define("modules/sidebar/loader",["modules/sidebar/setup","modules/sidebar/views/sidebarTab","modules/sidebar/controller"],function(){Application.module("Sidebar",function(e,t,n,r,i,s){e.addInitializer(function(){console.log("Load Sidebar..."),r.TemplateLoader.loadModuleTemplates(e,e.show)})})}),define("modules/search/setup",[],function(){Application.module("Search",function(){this.prefix="search",this.templatePath="assets/javascripts/modules/",this.views={},this.template=function(e){return this.prefix+"-"+e},this.models={},this.collections={}})}),define("modules/search/views/base/base",[],function(){Application.module("Search",function(e,t,n,r,i,s){e.setupWYSIWIGEditor=function(e,t,n,r,i){e.$el.find("#"+t).editable({type:"wysihtml5",emptytext:r,value:n,success:function(t,n){e.model.save(i,n,{wait:!0,patch:!0,success:function(e){console.log("Saved on server!!"),console.dir(e)},error:function(e,t){return console.dir(t),console.log("Error on server!! -- "+t),t}})}})},e.views.BasicInfoView=r.ItemView.extend({template:"search/views/base/basicInfo",onRender:function(){var t="basicInfoEditor";e.setupWYSIWIGEditor(this,t,this.model.toJSON().basicInfo,"Add info...",t)}});var o="<h4 id='<%=args.headingId%>'><%=args.headingTitle%></h4><div id='<%=args.editorId%>'></div>";e.views.GenericWYSIWYGView=r.ItemView.extend({template:function(e){return s.template(o,{headingId:e.headingId,headingTitle:e.headingTitle,editorId:e.editorId},{variable:"args"})},serializeData:function(){var e=this.model.toJSON();return e.headingId=this.options.headingId,e.headingTitle=this.options.headingTitle,e.editorId=this.options.editorId,e},onRender:function(){var t=this.model.toJSON();e.setupWYSIWIGEditor(this,this.options.editorId,this.options.value,this.options.emptyText,this.options.modelAttr)}})})}),define("modules/search/views/base/search",[],function(){Application.module("Search",function(e,t,n,r,i,s){e.views.SearchContentLayout=r.Layout.extend({template:"search/views/base/searchLayout",regions:{streamContentRegion:"#streamContent",addNewStreamRegion:"#addNewStream"}}),e.createStreamEvt="createStream",e.views.AddNewStream=r.ItemView.extend({template:"search/views/base/addNew",events:{"click #createStream":"createStream"},onRender:function(){n.Validation.bind(this)},createStream:function(t){t.preventDefault(),this.trigger(e.createStreamEvt,this)}});var o="<p><%=args.contentText%></p>";e.views.SearchContent=r.ItemView.extend({template:function(e){return s.template(o,{contentText:e.contentText},{variable:"args"})},tagName:"span"})})}),define("modules/search/views/specialization/specialization",[],function(){Application.module("Search",function(e,t,n,r,i,s){e.SPECIALIZATIONS="specializations",e.specializationUrl="/specialization"})}),define("modules/search/views/stream/stream",[],function(){Application.module("Search",function(e,t,n,r,i,s){e.streamUrl="/stream",e.allStreamsUrl="/streams/all",e.degreeUrl="/degree",e.allDegreesUrl="/degrees",e.allBachelorsUrl="/degrees/bachelors",e.allMastersUrl="/degrees/masters",e.allDoctorateUrl="/degrees/doctorate",e.createMajorEvt="createMajor",e.createDegreeEvt="createDegree",e.updateDegreesEvt="updateDegreesSection",e.models.Stream=n.Model.extend({urlRoot:e.streamUrl,validation:{title:{required:!0,minLength:4}}}),e.collections.AllStreamsCollection=n.Collection.extend({url:e.allStreamsUrl,model:e.models.Stream}),e.views.StreamContentLayout=r.Layout.extend({template:"search/views/stream/layout",regions:{basicInfoRegion:"#basicInfo",skillsRegion:"#skills",degreesRegion:"#degrees",addMajorToStreamRegion:"#addMajorToStream",newDegreeRegion:"#newDegree",newMajorRegion:"#newMajor"}}),e.views.StreamDegreesLayout=r.Layout.extend({template:"search/views/stream/degreesLayout",regions:{headingDegreeRegion:"#heading_degree",bachelorsRegion:"#bachelors",mastersRegion:"#masters",doctorateRegion:"#doctorate"}}),e.views.SkillsView=r.ItemView.extend({template:"search/views/stream/skills",serializeData:function(){return this.data=this.model.toJSON(),this.data.heading_skills="Skills Required",this.data},onRender:function(){var t="skills";e.setupWYSIWIGEditor(this,t,this.model.toJSON().skills,"Add required skills...",t)}});var o="<%=args.heading_degree%>";e.views.StreamDegreeHeading=r.ItemView.extend({tagName:"h4",template:function(e){return s.template(o,{heading_degree:e.heading_degree},{variable:"args"})}}),e.views.Degree=r.ItemView.extend({template:"search/views/stream/degreeView",serializeData:function(){return this.data=this.model.toJSON(),this.data.degreeSectionHeader=this.options.degreeSectionHeader,this.data.degreeSectionId=this.options.degreeSectionId,this.data},onRender:function(){var t=this,n=this.options.degreeSectionId;this.$el.find("#"+n).editable({type:"checklist",source:t.options.checklistSource,emptytext:"Add degrees...",value:t.options.value,success:function(n,r){console.log(r.concat(t.options.addOnIdArr)),t.model.save(e.DEGREES,r.concat(t.options.addOnIdArr),{patch:!0,success:function(n){console.log("Saved on server!!"),t.trigger(e.updateDegreesEvt,n)},error:function(e,t){return console.dir(t),console.log("Error on server!! -- "+t),t}})}})}}),e.views.AddNewDegree=r.ItemView.extend({template:"search/views/stream/newDegree",events:{"click #createDegree":e.createDegreeEvt},onRender:function(){n.Validation.bind(this)},createDegree:function(t){t.preventDefault(),this.trigger(e.createDegreeEvt,this)}}),e.views.AddNewMajor=r.ItemView.extend({template:"search/views/stream/newMajor",events:{"click #createMajor":e.createMajorEvt},onRender:function(){n.Validation.bind(this)},createMajor:function(t){t.preventDefault(),this.trigger(e.createMajorEvt,this)}});var u="<hr><h3>Admin Section</h3><legend>AddMajorToStream</legend><span id='addMajor'></span>";e.views.AddMajorToStream=r.ItemView.extend({template:function(e){return s.template(u,{},{variable:"args"})},onRender:function(){var t=this;this.$el.find("#addMajor").editable({source:e.getIdToTitleArrayMap(e.allMajorsCollection.toJSON()),emptytext:"Add Major to stream",type:"select2",select2:{placeholder:"Add Major",allowClear:!0},success:function(e,n){console.log(n),t.model.save("major",n,{patch:!0,success:function(e){i.jGrowl("New major added: "+e.get("title"),{theme:"jGrowlSuccess"}),console.log("Saved on server!!")},error:function(e,t){return i.jGrowl("Error saving major!",{theme:"jGrowlError"}),console.dir(t),console.log("Error on server!! -- "+t),t}})}})}}),e.createNewDegree=function(r){var s=new e.views.AddNewDegree({model:new t.Base.models.Generic({urlRoot:e.degreeUrl})});r.newDegreeRegion.show(s),this.listenTo(s,e.createDegreeEvt,function(t){var s=n.Syphon.serialize(t);console.log(s),t.model.unset("urlRoot",{silent:!0}),t.model.save(s,{wait:!0,success:function(t){i.jGrowl("New degree created: "+t.get("title"),{theme:"jGrowlSuccess"}),e.addStreamAdminSection(r)},error:function(t,n){i.jGrowl("Error saving "+t.get("title")+" degree!",{theme:"jGrowlError"}),console.error("Error Model: "+t.toJSON()),console.error("Error Response: "+n.statusText),e.addStreamAdminSection(r)}})})},e.createNewMajor=function(r){var s=new e.views.AddNewMajor({model:new t.Base.models.Generic({urlRoot:e.majorUrl})});r.newMajorRegion.show(s),this.listenTo(s,e.createMajorEvt,function(t){var s=n.Syphon.serialize(t);console.log(s),t.model.unset("urlRoot",{silent:!0}),t.model.save(s,{wait:!0,success:function(t){i.jGrowl("New degree created: "+t.get("title"),{theme:"jGrowlSuccess"}),e.addStreamAdminSection(r)},error:function(t,n){i.jGrowl("Error saving "+t.get("title")+" degree!",{theme:"jGrowlError"}),console.error("Error Model: "+t.toJSON()),console.error("Error Response: "+n.statusText),e.addStreamAdminSection(r)}})})},e.addMajorToStream=function(t,n){var r=new e.views.AddMajorToStream({model:n});t.addMajorToStreamRegion.show(r)},e.addStreamAdminSection=function(t,n){e.addMajorToStream(t,n),e.createNewDegree(t),e.createNewMajor(t)},e.populateAllCollections=function(){e.allBachelorsDegreeCollection=new t.Base.collections.Generic([],{url:e.allBachelorsUrl}),e.allBachelorsDegreeCollection.fetch({async:!1}),e.allMastersDegreeCollection=new t.Base.collections.Generic([],{url:e.allMastersUrl}),e.allMastersDegreeCollection.fetch({async:!1}),e.allDoctorateDegreeCollection=new t.Base.collections.Generic([],{url:e.allDoctorateUrl}),e.allDoctorateDegreeCollection.fetch({async:!1}),e.allMajorsCollection=new t.Base.collections.Generic([],{url:e.allMajorsUrl}),e.allMajorsCollection.fetch({async:!1})},e.getDegreeChecklistView=function(t,n,r,i,s,o,u){var a=new e.views.Degree({model:n,degreeSectionHeader:r,degreeSectionId:i,checklistSource:e.getValueToTitleArrayMap(s.toJSON()),value:o,addOnIdArr:u});return this.listenTo(a,e.updateDegreesEvt,function(n){e.addDegreeSection(t,n)}),a},e.addDegreeSection=function(n,r){var i=new e.views.StreamDegreeHeading({model:new t.Base.models.Generic({heading_degree:"Degrees Offered"})});n.headingDegreeRegion.show(i);var o=s.pluck(s.filter(r.attributes.degrees,function(t){return t.type==e.BACHELORS}),"id"),u=s.pluck(s.filter(r.attributes.degrees,function(t){return t.type==e.MASTERS}),"id"),a=s.pluck(s.filter(r.attributes.degrees,function(t){return t.type==e.DOCTORATE}),"id");if(s.size(e.allBachelorsDegreeCollection.models)>0){var f=e.getDegreeChecklistView(n,r,"Bachelors",e.BACHELORS,e.allBachelorsDegreeCollection,o,u.concat(a));n.bachelorsRegion.show(f)}if(s.size(e.allMastersDegreeCollection.models)>0){var l=e.getDegreeChecklistView(n,r,"Masters",e.MASTERS,e.allMastersDegreeCollection,u,o.concat(a));n.mastersRegion.show(l)}if(s.size(e.allDoctorateDegreeCollection.models)>0){var c=e.getDegreeChecklistView(n,r,"Doctorate",e.DOCTORATE,e.allDoctorateDegreeCollection,a,o.concat(u));n.doctorateRegion.show(c)}},e.addMajorSelect=function(n){var r=new e.views.SearchSelect({model:new t.Base.models.Generic({selectSpanId:"majorSelect"}),selectOptionsList:e.getIdToTitleArrayMap(n.attributes.majors),emptyText:"Select Major...",selectEvt:e.majorSelectEvt});e.searchSelectNavbar.majorSelectRegion.show(r),this.listenTo(r,e.majorSelectEvt,function(t){console.log(t),e.showMajorPageById(t)})},e.showStreamPage=function(n){e.populateAllCollections();var r=new t.Base.models.Generic({url:e.streamUrl+"/"+n});r.fetch({async:!1}),e.addMajorSelect(r);var i=new e.views.StreamContentLayout;e.searchLayout.searchContent.show(i);var s=new e.views.BasicInfoView({model:r});i.basicInfoRegion.show(s);var o=new e.views.SkillsView({model:r});i.skillsRegion.show(o);var u=new e.views.StreamDegreesLayout;i.degreesRegion.show(u),e.addDegreeSection(u,r),(t.Base.isAdmin()||t.Base.isSuperAdmin())&&e.addStreamAdminSection(i,r)}})}),define("modules/search/views/major/major",[],function(){Application.module("Search",function(e,t,n,r,i,s){e.majorUrl="/major",e.allMajorsUrl="/majors",e.occupationUrl="/occupation",e.allOccupationsUrl="/occupations",e.addSpecializationEvt="addSpecialization",e.addOccupationEvt="addOccupation",e.createOccupationEvt="createOccupation",e.views.MajorContentLayout=r.Layout.extend({template:"search/views/major/layout",regions:{basicInfoRegion:"#basicInfo",schoolPrepRegion:"#schoolPrep",collegeAdmissionRegion:"#collegeAdmission",specializationRegion:"#specializations",careerConnectRegion:"#careerConnect",occupationsRegion:"#occupations",salaryRegion:"#salary",collegeUnivRegion:"#collegeUniv",newOccupationRegion:"#newOccupation",newCollegeRegion:"#newCollege",addSpecializationRegion:"#addSpecialization"}});var o="<%=args.title%>";e.views.Specialization=r.ItemView.extend({template:function(e){return s.template(o,{title:e.title},{variable:"args"})},tagName:"li"}),e.views.SpecializationComposite=r.CompositeView.extend({itemView:e.views.Specialization,template:"search/views/major/specializationView",itemViewContainer:"ul"}),e.views.AddSpecialization=r.ItemView.extend({template:"search/views/major/addSpecialization",events:{"click #addSpecialization":e.addSpecializationEvt},onRender:function(){n.Validation.bind(this)},addSpecialization:function(t){t.preventDefault(),this.trigger(e.addSpecializationEvt,this)}});var u="<%=args.title%>";e.views.Occupation=r.ItemView.extend({template:function(e){return s.template(u,{title:e.title},{variable:"args"})},tagName:"li"}),e.views.OccupationComposite=r.CompositeView.extend({template:"search/views/major/occupationsView",itemView:e.views.Occupation,itemViewContainer:"ul",onRender:function(){if(t.Base.isAdmin()){var n=this,r="Add Occupation";this.$el.find("#addOccupations").editable({source:n.options.selectOptionsList,emptytext:r,type:"select2",select2:{placeholder:r,allowClear:!0},success:function(t,r){n.trigger(e.addOccupationEvt,r)}})}}}),e.views.AddNewOccupation=r.ItemView.extend({template:"search/views/major/newOccupationView",events:{"click #createOccupation":e.createOccupationEvt},onRender:function(){n.Validation.bind(this)},createOccupation:function(t){t.preventDefault(),this.trigger(e.createOccupationEvt,this)}}),e.addSpecializationSelect=function(){var t=new e.views.SearchSelect;e.searchSelectNavbar.specializationSelectRegion.show(t),this.listenTo(t,e.streamSelectEvt,function(e){})},e.showMajorPageById=function(n){var r=new t.Base.models.Generic({urlRoot:e.majorUrl,id:n});r.fetch({async:!1}),e.showMajorPage(r)},e.showMajorPage=function(n){var r=new e.views.MajorContentLayout;e.searchLayout.searchContent.show(r);var i=new e.views.BasicInfoView({model:n});r.basicInfoRegion.show(i);var s=new e.views.GenericWYSIWYGView({model:n,headingId:"schoolPrep_heading",headingTitle:"School Prep",editorId:"schoolPrepEditor",modelAttr:"schoolPrep",emptyText:"Add School Prep info...",value:n.toJSON().schoolPrep});r.schoolPrepRegion.show(s);var o=new e.views.GenericWYSIWYGView({model:n,headingId:"collegeAdmission_heading",headingTitle:"College Admission",editorId:"collegeAdmissionEditor",modelAttr:"admission",emptyText:"Add College Admission info...",value:n.toJSON().admission});r.collegeAdmissionRegion.show(o);var u=new e.views.SpecializationComposite({model:n,collection:new t.Base.collections.Generic(n.get(e.SPECIALIZATIONS))});r.specializationRegion.show(u);var a=new e.views.GenericWYSIWYGView({model:n,headingId:"careerConnect_heading",headingTitle:"Career Connect",editorId:"careerConnectEditor",modelAttr:"careerConnect",emptyText:"Add Career Connect info...",value:n.toJSON().careerConnect});r.careerConnectRegion.show(a);var f=new e.views.GenericWYSIWYGView({model:n,headingId:"salary_heading",headingTitle:"Salary",editorId:"salaryEditor",modelAttr:"salary",emptyText:"Add salary info...",value:n.toJSON().salary});r.salaryRegion.show(f),e.addOccupationsSection(r,n),t.Base.isAdmin()&&e.addAdminSection(r,n)},e.addOccupationsSection=function(n,r){var i=new t.Base.collections.Generic({url:e.allOccupationsUrl});i.fetch({async:!1});var s=new e.views.OccupationComposite({model:r,collection:new t.Base.collections.Generic(r.get("occupations")),selectOptionsList:e.getIdToTitleArrayMap(i.toJSON())});n.occupationsRegion.show(s),this.listenTo(s,e.addOccupationEvt,function(t){console.log("Add occup: "+t),r.save("addOccupation",t,{wait:!0,patch:!0,success:function(t){console.log("Saved on server!!"),e.showMajorPage(t)},error:function(t,n){console.log("Error on server!! -- "+n),e.showMajorPage(r)}})})},e.addAdminSection=function(t,r){var s=new e.views.AddSpecialization({model:r});t.addSpecializationRegion.show(s),this.listenTo(s,e.addSpecializationEvt,function(t){var r=n.Syphon.serialize(t);console.log(r),t.model.save(r,{wait:!0,patch:!0,success:function(t){i.jGrowl("New Specialization created: "+t.get("title"),{theme:"jGrowlSuccess"}),e.showMajorPage(t)},error:function(t,n){i.jGrowl("Error saving "+t.get("title"),{theme:"jGrowlError"}),console.error("Error Model: "+t.toJSON()),console.error("Error Response: "+n.statusText),e.showMajorPage(t)}})}),e.createNewOccupation(t,r)},e.createNewOccupation=function(r,s){var o=new e.views.AddNewOccupation({model:new t.Base.models.Generic({urlRoot:e.occupationUrl})});r.newOccupationRegion.show(o),this.listenTo(o,e.createOccupationEvt,function(t){var r=n.Syphon.serialize(t);t.model.unset("urlRoot",{silent:!0}),t.model.save(r,{wait:!0,success:function(t){i.jGrowl("New occupation created: "+t.get("title"),{theme:"jGrowlSuccess"}),e.showMajorPage(s)},error:function(t,n){i.jGrowl("Error saving "+t.get("title"),{theme:"jGrowlError"}),console.error("Error Model: "+t.toJSON()),console.error("Error Response: "+n.statusText),e.showMajorPage(s)}})})}})}),define("modules/search/views/navigation/navigation",[],function(){Application.module("Search",function(e,t,n,r,i,s){var o='<span id="<%=args.selectSpanId%>"></span>',u='<i class="icon-chevron-right" style="margin-right: 3px;"></i>'+o;e.views.SearchSelect=r.ItemView.extend({template:function(e){return e.isStream?s.template(o,{selectSpanId:e.selectSpanId},{variable:"args"}):s.template(u,{selectSpanId:e.selectSpanId},{variable:"args"})},tagName:"span",events:{"click #remove":"removeItem"},initialize:function(e,t){e&&e.isStream&&(this.isStream=!0)},removeItem:function(){this.remove(),this.trigger("removed",this.model)},onRender:function(){var e=this;this.$el.find("#"+e.model.attributes.selectSpanId).editable({source:e.options.selectOptionsList,emptytext:e.options.emptyText,type:"select2",select2:{placeholder:e.options.emptyText,allowClear:!0},success:function(t,n){e.trigger(e.options.selectEvt,n)}}),this.$el.find("#"+e.model.attributes.selectSpanId).editable("option","disabled",!1)}}),e.views.SearchSelectNavBar=r.Layout.extend({template:"search/views/navigation/navigation",regions:{streamSelectRegion:"#streamSelect",majorSelectRegion:"#majorSelect",specializationSelectRegion:"#specializationSelect"}})})}),define("modules/search/views/layouts/layout",[],function(){Application.module("Search",function(e,t,n,r,i,s){e.views.mainLayout=r.Layout.extend({template:"search/views/layouts/main",regions:{searchNavigation:"#searchNavigation",searchContent:"#searchContent"}})})}),define("modules/search/controller",[],function(){Application.module("Search",function(e,t,n,r,i,s){e.onTemplatesLoaded=function(){this.show()},e.show=function(){console.log("Show Search..."),e.controller=new e.Controller({region:t.pageContent}),e.router=new e.Router({controller:e.controller}),e.controller.showSearchHome()},e.homeUrl="search",e.Router=r.AppRouter.extend({appRoutes:{search:"showSearchHome"}}),e.getIdToTitleArrayMap=function(e){return s.map(e,function(e){return{id:e.id,text:e.title}})},e.getValueToTitleArrayMap=function(e){return s.map(e,function(e){return{value:e.id,text:e.title}})},e.populateAllStreams=function(){e.allStreamsCollection=new e.collections.AllStreamsCollection,e.allStreamsCollection.fetch({async:!1})},e.Controller=r.Controller.extend({initialize:function(t){this.region=t.region,console.log("Search Module Initialized"),e.populateAllStreams()},showSearchHome:function(){e.mainLayout=new t.Base.views.MainLayout,this.region.show(e.mainLayout),e.addPageHeader(),e.showSearchSection(),e.router.navigate(e.homeUrl)}}),e.streamSelectEvt="streamSelected",e.majorSelectEvt="majorSelected",e.specializationSelectEvt="specializationSelected",e.addPageHeader=function(){var r=new t.Base.views.HeaderLayout;e.mainLayout.pageHeaderRegion.show(r);var i=new t.Base.views.PageHeader({model:new n.Model({header:"Search"})});r.pageHeader.show(i)},e.showSearchSection=function(){e.searchLayout=new e.views.mainLayout,e.mainLayout.tabContentRegion.show(e.searchLayout),e.searchSelectNavbar=new e.views.SearchSelectNavBar,e.searchLayout.searchNavigation.show(e.searchSelectNavbar),e.addStreamSelect()},e.addStreamSelect=function(){var n=new e.views.SearchSelect({model:new t.Base.models.Generic({selectSpanId:"streamSelect",isStream:!0}),selectOptionsList:e.getIdToTitleArrayMap(e.allStreamsCollection.toJSON()),emptyText:"Select Stream...",selectEvt:e.streamSelectEvt});e.searchSelectNavbar.streamSelectRegion.show(n),this.listenTo(n,e.streamSelectEvt,function(t){e.showStreamPage(t)});var r=new e.views.SearchContentLayout;e.searchLayout.searchContent.show(r);var i=new e.views.SearchContent({model:new t.Base.models.Generic({contentText:"Start your search above"})});r.streamContentRegion.show(i),t.Base.isAdmin()&&r.addNewStreamRegion.show(e.getCreateStreamView())},e.getCreateStreamView=function(){var t=new e.views.AddNewStream({model:new e.models.Stream});return this.listenTo(t,e.createStreamEvt,function(t){var r=n.Syphon.serialize(t);t.model.save(r,{wait:!0,success:function(t){i.jGrowl("New stream created: "+t.get("title"),{theme:"jGrowlSuccess"}),e.populateAllStreams(),e.showSearchSection()},error:function(t,n){i.jGrowl("Error saving "+t.get("title")+" stream!",{theme:"jGrowlError"}),console.error("Error Model: "+t),console.error("Error Response: "+n.responseText),e.showSearchSection()}})}),t},e.BACHELORS="bachelors",e.MASTERS="masters",e.DOCTORATE="doctorate",e.DEGREES="degrees"})}),define("modules/search/loader",["modules/search/setup","modules/search/views/base/base","modules/search/views/base/search","modules/search/views/specialization/specialization","modules/search/views/stream/stream","modules/search/views/major/major","modules/search/views/navigation/navigation","modules/search/views/layouts/layout","modules/search/controller"],function(){Application.module("Search",function(e,t,n,r,i,s){e.addInitializer(function(){console.log("Load Search..."),r.TemplateLoader.loadModuleTemplates(e,e.show)})})}),define("modules/settings/setup",[],function(){Application.module("Settings",function(){this.prefix="settings",this.templatePath="assets/javascripts/modules/",this.views={},this.template=function(e){return this.prefix+"-"+e},this.models={},this.collections={}})}),define("modules/settings/views/profile",[],function(){Application.module("Settings",function(e,t,n,r,i,s){e.createAdminEvt="createAdmin",e.models.User=t.Base.models.Generic.extend({validation:{firstName:{required:!0},lastName:{required:!0},email:{required:!0,pattern:"email"},password:{required:!0},confirmPassword:{equalTo:"password"}}}),e.views.Layout=r.Layout.extend({template:"settings/views/layout",regions:{profileRegion:"#profileSection",adminRegion:"#adminSection"}}),e.views.Profile=r.ItemView.extend({template:"settings/views/profile",serializeData:function(){return this.data=this.model.toJSON(),this.data.editProfileUrl="editProfile",this.data.editPasswordUrl="editPassword",this.data}}),e.views.CreateAdmin=r.ItemView.extend({template:"settings/views/createAdmin",events:{"click #createAdmin":e.createAdminEvt},onRender:function(){n.Validation.bind(this)},createAdmin:function(t){t.preventDefault(),console.log("Create Admin"),this.trigger(e.createAdminEvt,this)}})})}),define("modules/settings/controller",[],function(){Application.module("Settings",function(e,t,n,r,i,s){e.onTemplatesLoaded=function(){this.show()},e.show=function(){console.log("Show Settings..."),e.controller=new e.Controller({region:t.pageContent}),e.router=new e.Router({controller:e.controller})},e.profileUrl="settings/profile",e.Router=r.AppRouter.extend({appRoutes:{settings:"showSettingsHome"}}),e.Controller=r.Controller.extend({initialize:function(e){this.region=e.region,console.log("Settings Module Initialized")},showSettingsHome:function(){e.mainLayout=new t.Base.views.MainLayout,this.region.show(e.mainLayout),e.addPageHeader(),e.showProfile()}}),e.addPageHeader=function(){var r=new t.Base.views.HeaderLayout;e.mainLayout.pageHeaderRegion.show(r);var i=new t.Base.views.PageHeader({model:new n.Model({header:"Settings"})});r.pageHeader.show(i)},e.userUrl="/user",e.showProfile=function(){var r=new e.views.Layout;e.mainLayout.tabContentRegion.show(r);var s=new e.views.Profile({model:t.Base.loggedUser});r.profileRegion.show(s);if(t.Base.isAdmin()){var o=new e.views.CreateAdmin({model:new e.models.User({urlRoot:e.userUrl})});r.adminRegion.show(o),this.listenTo(o,e.createAdminEvt,function(t){var r=n.Syphon.serialize(t);r.roleType="Admin",console.log(r),t.model.save(r,{wait:!0,success:function(t){i.jGrowl("New Admin created: "+t.get("firstName"),{theme:"jGrowlSuccess"}),e.showProfile()},error:function(e,t){i.jGrowl("Error saving "+e.get("firstName"),{theme:"jGrowlError"}),console.error("Error Model: "+e.toJSON()),console.error("Error Response: "+t.statusText),Search.showProfile()}})})}e.router.navigate(e.profileUrl)}})}),define("modules/settings/loader",["modules/settings/setup","modules/settings/views/profile","modules/settings/controller"],function(){Application.module("Settings",function(e,t,n,r,i,s){e.addInitializer(function(){console.log("Load Settings..."),r.TemplateLoader.loadModuleTemplates(e,e.show)})})}),define("modules/queries/setup",[],function(){Application.module("Queries",function(){this.prefix="queries",this.templatePath="assets/javascripts/modules/",this.views={},this.template=function(e){return this.prefix+"-"+e},this.models={},this.collections={}})}),define("modules/queries/views/query",[],function(){Application.module("Queries",function(e,t,n,r,i,s){e.views.StudentQueriesLayout=r.Layout.extend({template:"queries/views/student/layout",regions:{newQueryRegion:"#newQuery",queryTableRegion:"#queryTable"}}),e.views.addNewQuery=r.ItemView.extend({template:"queries/views/student/addQuery",events:{"click #createNewQueryBtn":"createNewQuery","click #cancelNewQueryBtn":"cancelNewQuery","click #addQueryBtnContainer":"toggleCreateQueryEditor"},serializeData:function(){return this.data=this.model.toJSON(),this.data},createNewQuery:function(e){e.preventDefault(),this.trigger("createNewQuery",this),this.toggleCreateQueryEditor(e)},cancelNewQuery:function(e){e.preventDefault(),this.toggleCreateQueryEditor(e)},toggleCreateQueryEditor:function(e){e.preventDefault(),this.addQueryEditorContainer.fadeToggle()},onRender:function(){this.addQueryEditor=this.$el.find("#addQueryEditor"),this.addQueryEditorContainer=this.$el.find("#addQueryEditorContainer"),this.addQueryEditor.wysihtml5();var e=new t.Base.views.AddButton({model:new n.Model({linkUrl:"query/add",linkClasses:"btn btn-primary",iconClasses:"icon-plus-sign icon-white",btnText:"Add Query",id:"addQueryBtn"})});this.$el.find("#addQueryBtnContainer").append(e.render().el)}}),e.views.MyQueriesTableRow=r.ItemView.extend({template:"queries/views/student/row",templateHelpers:t.Base.dateViewHelper,tagName:"tr",className:"rowlink",serializeData:function(){return this.data=this.model.toJSON(),this.data.linkUrl="query/"+this.data.id,this.data.assigneeNames=t.Base.getCounselorName(this.data.assignedTo),this.data},events:{"click td":t.Base.rowClicked},rowClicked:function(e){e.preventDefault(),this.trigger(t.Base.rowClickedEvt,this.model)}}),e.views.MyQueriesTable=r.CompositeView.extend({tagName:"table",template:"queries/views/student/tableContainer",itemView:e.views.MyQueriesTableRow,className:"display dataTable table table-striped table-bordered",appendHtml:function(e,t,n){e.$("tbody").append(t.el)}})})}),define("modules/queries/controller",[],function(){Application.module("Queries",function(e,t,n,r,i,s){e.onTemplatesLoaded=function(){this.show()},e.show=function(){console.log("Show Queries..."),e.controller=new e.Controller({region:t.pageContent}),e.router=new e.Router({controller:e.controller})},e.homeUrl="queries",e.Router=r.AppRouter.extend({appRoutes:{queries:"showQueriesHome"}}),e.Controller=r.Controller.extend({initialize:function(e){this.region=e.region,console.log("Queries Module Initialized")},showQueriesHome:function(){e.mainLayout=new t.Base.views.MainLayout,this.region.show(e.mainLayout),e.addPageHeader(),e.showQueriesSection()}}),e.addPageHeader=function(){var r=new t.Base.views.HeaderLayout;e.mainLayout.pageHeaderRegion.show(r);var i=new t.Base.views.PageHeader({model:new n.Model({header:"Queries"})});r.pageHeader.show(i)},e.showAddQueryBtn=function(t,n){var r=new e.views.addNewQuery({model:n});this.listenTo(r,"createNewQuery",function(n){var r=n.addQueryEditor.val();r&&n.model.save({queryText:r},{patch:!0,wait:!0,success:function(n,r){i.jGrowl("Query created!!",{theme:"jGrowlSuccess"}),console.dir(n),e.showMyQueries(t,n)},error:function(e,t){i.jGrowl("Error saving query!\n"+t.responseText,{theme:"jGrowlError"}),console.error("Query not saved on server: "+t.responseText)}})}),t.newQueryRegion.show(r)},e.showMyQueries=function(e,n){var r=new t.Base.views.TableLayout;e.queryTableRegion.show(r),r.tableHeaderRegion.show(this.setTableHeaderView("My Queries"));var i=new t.Base.collections.Generic(n.get("queries")),s=this.setTableBodyView({collection:i});r.tableBodyRegion.show(s),t.Base.addDataTables(r)},e.showQueriesSection=function(){var n=new e.views.StudentQueriesLayout;e.mainLayout.tabContentRegion.show(n);var r=t.Base.loggedUser;e.showAddQueryBtn(n,r),e.showMyQueries(n,r),e.router.navigate(e.homeUrl)},e.setTableHeaderView=function(e){return new t.Base.views.TableHeader({model:new n.Model({header:e})})},e.setTableBodyView=function(t){var n=new e.views.MyQueriesTable(t);return n}})}),define("modules/queries/loader",["modules/queries/setup","modules/queries/views/query","modules/queries/controller"],function(){Application.module("Queries",function(e,t,n,r,i,s){e.addInitializer(function(){console.log("Load Queries..."),r.TemplateLoader.loadModuleTemplates(e,e.show)})})}),define("modules/profiles/setup",[],function(){Application.module("Profiles",function(){this.prefix="profiles",this.templatePath="assets/javascripts/modules/",this.views={},this.template=function(e){return this.prefix+"-"+e},this.models={},this.collections={}})}),define("modules/profiles/views/profile/profile",[],function(){Application.module("Profiles",function(e,t,n,r,i,s){e.views.StudentProfileLayout=r.Layout.extend({template:"profiles/views/profile/student/layout",className:"span8",regions:{institutionRegion:"#institution",careerRegion:"#career",academicRegion:"#academic",personalRegion:"#personal"}}),e.views.InstitutionalView=r.ItemView.extend({model:t.Base.models.User,template:"profiles/views/profile/student/institutionalView",serializeData:function(){return this.data=this.model.toJSON(),this.data},onRender:function(){n.Validation.bind(this),this.setupInstitutionView()},setupInstitutionView:function(){var n=this,r=t.Base.allSchoolsCollection.toJSON(),i=s.map(r,function(e){return{id:e.id,text:e.name}}),o="";n.data.institution&&(o=n.data.institution.id),e.setupSelect2EditableBox(this.$el,this.model,"schoolId",i,"Enter Institution Name",o);var u=t.Base.allCounselorCollection.toJSON(),a=s.map(u,function(e){return{id:e.id,text:e.fullName}});e.setupSelect2EditableBox(this.$el,this.model,"ownerId",a,"Enter Counselor Name",n.data.ownerId)}}),e.setupSelect2EditableBox=function(e,t,n,r,i,s){e.find("#"+n).editable({source:r,type:"select2",value:s,emptytext:i,select2:{placeholder:i},success:function(e,r){console.log(r),t.save(n,r,{wait:!0,patch:!0,success:function(e){console.log("Saved on server!!")},error:function(e,t){return console.log("Error on server!! -- "+t),t}})}})},e.views.CareerView=r.ItemView.extend({model:t.Base.models.User,template:"profiles/views/profile/student/careerView",serializeData:function(){return this.data=this.model.toJSON(),this.data},onRender:function(){n.Validation.bind(this),this.setupCareerView()},setupCareerView:function(){var t=[{id:"uk",text:"United Kingdom"},{id:"cn",text:"Canada"},{id:"au",text:"Australia"},{id:"nz",text:"New Zealand"},{id:"us",text:"United States"},{id:"in",text:"India"},{id:"ru",text:"Russia"}],n=[{id:"en",text:"Engineering"},{id:"md",text:"Medical"},{id:"fa",text:"Fine Arts"},{id:"cm",text:"Commerce"}],r=[{id:"ab",text:"Architect Babu"},{id:"ds",text:"Dagdaar Sahib"},{id:"na",text:"Nachaiyya"},{id:"kb",text:"Kalam wali bai"},{id:"gw",text:"Gawaia"}];e.setupSelect2EditableBox(this.$el,this.model,"countryInterested",t,"Select Country",this.data.countryInterested),e.setupSelect2EditableBox(this.$el,this.model,"fieldInterested",n,"Select Field",this.data.fieldInterested),e.setupSelect2EditableBox(this.$el,this.model,"programInterested",r,"Select Program",this.data.programInterested)}}),e.views.AcademicView=r.ItemView.extend({model:t.Base.models.User,template:"profiles/views/profile/student/academicView",serializeData:function(){return this.data=this.model.toJSON(),this.data},onRender:function(){n.Validation.bind(this),this.setupAcademicView()},setupEditableBox:function(e,t,n,r){var i=this;this.$el.find("#"+e).editable({type:r,emptytext:t,value:n,success:function(t,n){i.model.save(e,n,{wait:!0,patch:!0,success:function(e){console.log("Saved on server!!")},error:function(e,t){return console.log("Error on server!! -- "+t),t}})}})},setupAcademicView:function(){this.setupEditableBox("highSchoolScore","Enter Xth score/grade",this.data.highSchoolScore,"text"),this.setupEditableBox("seniorSecondaryScore","Enter XIIth score/grade",this.data.seniorSecondaryScore,"text"),this.setupEditableBox("gre","Enter GRE score/grade",this.data.gre,"text"),this.setupEditableBox("gmat","Enter GMAT score/grade",this.data.gmat,"text"),this.setupEditableBox("sat","Enter SAT score/grade",this.data.sat,"text"),this.setupEditableBox("toefl","Enter TOEFL score/grade",this.data.toefl,"text"),this.setupEditableBox("ielts","Enter IELTS score/grade",this.data.ielts,"text"),this.setupEditableBox("remarks","Enter any other details you would like",this.data.remarks,"textarea")}}),e.views.showProfile=r.ItemView.extend({template:"profiles/views/profile/profile",serializeData:function(){return this.data=this.model.toJSON(),this.data.editProfileUrl="editProfile",this.data.editPasswordUrl="editPassword",this.data}})})}),define("modules/profiles/controller",[],function(){Application.module("Profiles",function(e,t,n,r,i,s){e.onTemplatesLoaded=function(){this.show()},e.show=function(){console.log("Show Profiles..."),e.controller=new e.Controller({region:t.pageContent}),e.router=new e.Router({controller:e.controller})},e.profileUrl="profiles/profile",e.Router=r.AppRouter.extend({appRoutes:{profiles:"showProfilesHome"}}),e.Controller=r.Controller.extend({initialize:function(e){this.region=e.region,console.log("Profiles Module Initialized")},showProfilesHome:function(){e.mainLayout=new t.Base.views.MainLayout,this.region.show(e.mainLayout),e.addPageHeader(),e.showProfile()}}),e.addPageHeader=function(){var r=new t.Base.views.HeaderLayout;e.mainLayout.pageHeaderRegion.show(r);var i=new t.Base.views.PageHeader({model:new n.Model({header:"Profile"})});r.pageHeader.show(i)},e.showProfile=function(){var n=new e.views.showProfile({model:t.Base.loggedUser}),r=new e.views.StudentProfileLayout;e.mainLayout.tabContentRegion.show(r);var i=new e.views.InstitutionalView({model:t.Base.loggedUser});r.institutionRegion.show(i);var s=new e.views.CareerView({model:t.Base.loggedUser});r.careerRegion.show(s);var o=new e.views.AcademicView({model:t.Base.loggedUser});r.academicRegion.show(o),e.router.navigate(e.profileUrl)}})}),define("modules/profiles/loader",["modules/profiles/setup","modules/profiles/views/profile/profile","modules/profiles/controller"],function(){Application.module("Profiles",function(e,t,n,r,i,s){e.addInitializer(function(){console.log("Load Profiles..."),r.TemplateLoader.loadModuleTemplates(e,e.show)})})}),define("modules/main/loader",["modules/templateLoader/templateLoader","modules/base/loader","modules/header/loader","modules/sidebar/loader","modules/search/loader","modules/settings/loader","modules/queries/loader","modules/profiles/loader"],function(){console.log("Init Main..."),Application.module("Main",function(e,t,n,r,i,s){e.addInitializer(function(){console.log("Start Main..."),r.TemplateLoader.loadModuleTemplates(e,e.show),n.history&&(console.log("Start Backbone history..."),n.history.start())})})}),requirejs.config({baseUrl:"assets/javascripts",paths:{jquery:"lib/jquery/jquery.min",jqueryUI:"lib/jquery-ui/jquery-ui.min",jGrowl:"lib/jquery-jgrowl/jquery.jgrowl.min",underscore:"lib/underscore/underscore-min",backbone:"lib/backbone/backbone-min",marionette:"lib/marionette/backbone.marionette.min",backboneValidation:"lib/backbone-validation/backbone-validation-amd-min",backboneSyphon:"lib/backbone-syphon/backbone.syphon.min",moment:"lib/utils/moment.min",dateTimePicker:"lib/utils/bootstrap-datetimepicker.min",dataTables:"lib/jquery-dataTables/jquery.dataTables.min",bootstrapEditable:"lib/bootstrap-editable/bootstrap-editable.min",wysihtml5:"lib/bootstrap-editable/wysihtml5/wysihtml5",wysihtml5_0_3_0:"lib/bootstrap-editable/wysihtml5/bootstrap-wysihtml5-0.0.2/wysihtml5-0.3.0.min",bootstrapWysihtml:"lib/bootstrap-editable/wysihtml5/bootstrap-wysihtml5-0.0.2/bootstrap-wysihtml5-0.0.2.min",select2:"lib/select2/select2",bootstrap:"lib/bootstrap/bootstrap"},shim:{underscore:{exports:"_"},backbone:{deps:["underscore","jquery"],exports:"Backbone"},marionette:{deps:["backbone"],exports:"Marionette"},templateLoader:{deps:["marionette"]},dateTimePicker:{deps:["jquery"]},dataTables:{deps:["jquery"]},jGrowl:{deps:["jquery"]},bootstrapEditable:{deps:["bootstrap","select2","bootstrapWysihtml"]},wysihtml5:{deps:["bootstrapEditable"]},wysihtml5_0_3_0:{deps:["jquery"]},bootstrapWysihtml:{deps:["wysihtml5_0_3_0"]},select2:{deps:["jquery"]}}});var dependencies=["marionette","moment","jquery","jqueryUI","jGrowl","backboneValidation","backboneSyphon","bootstrapEditable","wysihtml5","bootstrap","select2","dataTables","dateTimePicker"];require(dependencies,function(e){return console.log("Init Application..."),window.Application=new e.Application,Application.addRegions({headerRegion:"#header-region",sidebar:"#sidebar-region",pageContent:"#page-content-region",footer:"#footer-region"}),Application.on("initialize:after",function(){console.log("Application has started")}),require(["modules/main/loader"],function(){console.log("Start Application..."),Application.start()}),Application}),define("app",function(){});